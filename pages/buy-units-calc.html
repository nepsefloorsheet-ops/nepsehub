<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buying Capacity Calculator | NEPSE Hub</title>
    <link rel="shortcut icon" href="../img/favicon/NH.png" type="image/x-icon" />
    <link rel="stylesheet" href="../src/css/global.css" />
    <link rel="stylesheet" href="../src/css/calculators/buy-units-calc.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;600;700&family=Roboto+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <div id="layout"></div>
    <main class="active">
      <header class="header">
        <div class="header-items">
          <div class="header-group">
            <div class="header-col">
              <span class="header-col-label">NEPSE Index</span>
              <div id="nepseData" class="flex gap-10 items-baseline">
                <span class="index-value">--</span>
                <div class="flex column">
                  <span class="difference">--</span>
                  <span class="percent-ch">(--)</span>
                </div>
              </div>
            </div>
            <div class="divider-v"></div>
            <span class="pulse-dot" id="headerPulse"></span>
            <div class="turnover-volume">
              <div class="header-col">
                <div class="header-col-item">
                  <span class="header-col-label">Total Turnover</span>
                  <span class="header-col-value turnover">--</span>
                </div>
                <div class="header-col-item">
                  <span class="header-col-label">Total Volume</span>
                  <span class="header-col-value volume">--</span>
                </div>
              </div>
            </div>
          </div>

          <div class="header-group">
            <div class="header-col right">
              <span
                id="currentDate"
                class="header-col-label"
                style="font-size: 0.9rem"
                >---, -- ---</span
              >
              <span
                id="currentTime"
                class="header-col-value"
                style="font-size: 0.9rem"
                >--:--:--</span
              >
            </div>
            <div class="divider-v"></div>
            <div class="header-col items-center">
              <div class="flex items-center gap-8" style="margin-bottom: 2px">
                <span id="market-status" class="market-pill">Checking...</span>
              </div>
              <div class="theme-switcher">
                <button class="theme-btn" data-theme="dark" title="Dark Mode">
                  <i class="fa-solid fa-moon"></i>
                </button>
                <button class="theme-btn" data-theme="light" title="Light Mode">
                  <i class="fa-regular fa-sun"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div class="content">
        <div class="calculator-container">
          <div class="calc-card">
            <div class="input-section">
              <h2><i class="fas fa-shopping-cart"></i> Buying Capacity</h2>
              <p
                class="text-secondary mb-20"
                style="font-size: 0.9rem; line-height: 1.4"
              >
                Find exactly how many shares you can buy with your available
                balance, including all mandatory NEPSE fees.
              </p>

              <div class="form-group">
                <label>Investable Amount (Balance)</label>
                <div class="input-wrapper">
                  <i class="fas fa-wallet"></i>
                  <input
                    type="number"
                    id="budget-input"
                    placeholder="Enter total budget..."
                    value="50000"
                  />
                </div>
              </div>

              <div class="form-group">
                <label>Price per Share (LTP)</label>
                <div class="input-wrapper">
                  <i class="fas fa-tag"></i>
                  <input
                    type="number"
                    id="price-input"
                    placeholder="Enter share price..."
                    value="500"
                  />
                </div>
              </div>
            </div>

            <div class="result-section">
              <div class="result-main">
                <div class="result-label">Units You Can Buy</div>
                <div id="max-units" class="result-value">100</div>
                <div class="text-secondary mt-10">
                  Approx. <span id="breakdown-units">100</span> Shares
                </div>
              </div>

              <div class="breakdown-list">
                <div class="breakdown-item">
                  <span>Purchase Value</span>
                  <span id="breakdown-total" class="val">Rs. 0.00</span>
                </div>
                <div class="breakdown-item">
                  <span>Broker Commission</span>
                  <span id="breakdown-comm" class="val">Rs. 0.00</span>
                </div>
                <div class="breakdown-item">
                  <span>SEBON Fee (0.015%)</span>
                  <span id="breakdown-sebon" class="val">Rs. 0.00</span>
                </div>
                <div class="breakdown-item">
                  <span>DP Charge</span>
                  <span id="breakdown-dp" class="val">Rs. 25.00</span>
                </div>
                <div class="breakdown-item total-spent">
                  <span>Total Payable</span>
                  <span id="breakdown-final" class="val">Rs. 0.00</span>
                </div>
              </div>
            </div>
          </div>

          <div class="info-cards">
            <div class="info-card">
              <h4><i class="fas fa-info-circle"></i> Commission Tiers</h4>
              <ul>
                <li>Up to 50,000 <span>0.36% (Min Rs 10)</span></li>
                <li>50k - 5 Lakhs <span>0.33%</span></li>
                <li>5 Lakhs - 20 Lakhs <span>0.30%</span></li>
                <li>20 Lakhs - 1 Crore <span>0.27%</span></li>
                <li>Above 1 Crore <span>0.24%</span></li>
              </ul>
            </div>
            <div class="info-card">
              <h4><i class="fas fa-shield-alt"></i> Other Charges</h4>
              <ul>
                <li>SEBON Regulatory Fee <span>0.015%</span></li>
                <li>DP Charge (Per Stock) <span>Rs. 25</span></li>
                <li>Capital Gains Tax (Sell) <span>5% or 7.5%</span></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script src="../src/js/utils/cleanup-manager.js"></script>
    <script src="../src/js/services/api-service.js"></script>
    <script defer src="../src/js/layout.js"></script>
    <script defer src="../src/js/global.js"></script>
    <script defer src="../src/js/calculators/buy-units-calc.js"></script>
  </body>
</html>
