<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Candlestick AI | NEPSE Hub</title>
    <link rel="shortcut icon" href="../img/favicon/NH.png" type="image/x-icon" />
    <link rel="stylesheet" href="../src/css/global.css" />
    <link rel="stylesheet" href="../src/css/market/candlesticks.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;600;700&family=Roboto+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="../src/js/auth-guard.js"></script>
  </head>

  <body>
    <div id="layout"></div>
    <main class="active">
      <header class="header">
        <div class="header-items">
          <div class="header-group">
            <div class="header-col">
              <span class="header-col-label">NEPSE Index</span>
              <div id="nepseData" class="flex gap-10 items-baseline">
                <span class="index-value">--</span>
                <div class="flex column">
                  <span class="difference">--</span>
                  <span class="percent-ch">(--)</span>
                </div>
              </div>
            </div>
            <div class="divider-v"></div>
            <span class="pulse-dot" id="headerPulse"></span>
            <div class="turnover-volume">
              <div class="header-col">
                <div class="header-col-item">
                  <span class="header-col-label">Total Turnover</span>
                  <span class="header-col-value turnover">--</span>
                </div>
                <div class="header-col-item">
                  <span class="header-col-label">Total Volume</span>
                  <span class="header-col-value volume">--</span>
                </div>
              </div>
            </div>
          </div>

          <div class="header-group">
            <div class="header-col right">
              <span
                id="currentDate"
                class="header-col-label"
                style="font-size: 0.9rem"
                >---, -- ---</span
              >
              <span
                id="currentTime"
                class="header-col-value"
                style="font-size: 0.9rem"
                >--:--:--</span
              >
            </div>
            <div class="divider-v"></div>
            <div class="header-col items-center">
              <div class="flex items-center gap-8" style="margin-bottom: 2px">
                <span id="market-status" class="market-pill">Checking...</span>
              </div>
              <div class="theme-switcher">
                <button class="theme-btn" data-theme="dark" title="Dark Mode">
                  <i class="fa-solid fa-moon"></i>
                </button>
                <button class="theme-btn" data-theme="light" title="Light Mode">
                  <i class="fa-regular fa-sun"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </header>

      <div class="content">
        <section>
          <div class="pattern-header">
            <div class="title-section">
              <div style="display: flex; align-items: baseline; gap: 15px">
                <h2 id="pattern-page-title">Candlestick AI Scanner</h2>
                <span id="pattern-count-badge" class="count-badge u-hidden"
                  >0 Patterns</span
                >
                <button
                  id="refresh-technical-btn"
                  class="refresh-tool-btn"
                  style="margin-left: 10px"
                >
                  <i class="fas fa-sync-alt"></i> Refresh Data
                </button>
              </div>
              <p class="subtitle">
                Real-time identification of high-probability price action
                patterns.
              </p>
            </div>
            <div class="legend">
              <div class="info-tooltip-container" style="margin-right: 15px">
                <div class="info-btn"><i class="fas fa-info"></i></div>
                <div class="tooltip-content">
                  <b>Candlestick AI</b>
                  Uses automated logic to identify critical price action
                  patterns like Hammers, Shooting Stars, and Engulfing candles.
                </div>
              </div>
              <span class="legend-item"
                ><i class="fas fa-arrow-up text-success"></i> Bullish</span
              >
              <span class="legend-item"
                ><i class="fas fa-arrow-down text-danger"></i> Bearish</span
              >
            </div>
          </div>

          <div class="scanner-controls">
            <div class="control-group">
              <label for="pattern-filter">Pattern Type</label>
              <select id="pattern-filter" class="select-input">
                <option value="all">All Patterns</option>
                <option value="Bullish">All Bullish</option>
                <option value="Bearish">All Bearish</option>
                <option value="Hammer">Hammers Only</option>
                <option value="Engulfing">Engulfing Only</option>
              </select>
            </div>
            <div class="button-group"></div>
          </div>

          <div class="patterns-grid" id="patterns-container">
            <!-- Pattern Cards injected by JS -->
          </div>

          <div id="no-results" class="empty-state u-hidden">
            <i class="fas fa-fire-flame-curved"></i>
            <p>No candlestick patterns detected for today's data.</p>
            <p class="subtitle" style="margin-top: 10px">
              Check back after market close or try another filter.
            </p>
          </div>
        </section>
      </div>
    </main>

    <script src="../src/js/utils/cleanup-manager.js?v=2"></script>
    <script src="../src/js/utils/error-handler.js?v=2"></script>
    <script src="../src/js/services/api-service.js?v=2"></script>
    <script defer src="../src/js/layout.js?v=2"></script>
    <script defer src="../src/js/global.js?v=2"></script>
    <script defer src="../src/js/market/candlesticks.js?v=2"></script>
  </body>
</html>
